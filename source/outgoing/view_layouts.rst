############
视图布局
############

.. contents::
    :local:
    :depth: 2

CodeIgniter支持一个简单但非常灵活的布局系统，使您可以轻松在整个应用程序中使用一个或多个基本页面布局。布局支持在任何渲染视图中插入内容部分。您可以创建不同的布局以支持一栏，两栏，博客存档页面等。布局永远不会直接呈现。而是渲染一个视图，该视图指定要扩展的布局。

*****************
创建布局
*****************

布局是与其他视图一样的视图。唯一的区别是它们的预期用途。布局是唯一可以使用 ``renderSection()`` 方法的视图文件。此方法充当内容的占位符。

::

    <!doctype html>
    <html>
    <head>
        <title>My Layout</title>
    </head>
    <body>
        <?= $this->renderSection('content') ?>
    </body>
    </html>

``renderSection()`` 方法只有一个参数-节的名称。这样，任何子视图都知道如何命名内容部分。

**********************
在视图中使用布局
**********************

无论何时需要把视图插入到布局中时，都必须在文件开头使用 ``extend()`` 方法::

    <?= $this->extend('default') ?>

``extend()`` 方法采用您希望使用的任何视图文件的名称。由于它们是标准视图，因此它们的位置就像视图一样。默认情况下，它将在应用程序的View目录中查找，但还将扫描其他PSR-4定义的命名空间。您可以包括一个命名空间以在特定命名空间的View目录中定位视图::

    <?= $this->extend('Blog\Views\default') ?>

扩展布局的视图中的所有内容必须包含在 ``section($name)`` 和 ``endSection()`` 方法调用中。这些调用之间的任何内容都将插入到布局 ``renderSection($name)`` 中与节名称匹配的位置。::

    <?= $this->extend('default') ?>

    <?= $this->section('content') ?>
        <h1>Hello World!</h1>
    <?= $this->endSection() ?>

``endSection()`` 不需要节的名称，它会自动结束需要结束的节。

******************
渲染视图
******************

渲染视图及其布局的方法与在控制器中显示的任何其他视图的方法完全相同::

    public function index()
    {
        echo view('some_view');
    }

渲染器足够强大，它可以检测视图是需要单独渲染还是需要布局。

***********************
引用局部视图
***********************

局部视图是不扩展任何布局的视图文件。它们通常是可以在视图之间重复使用的内容。 使用视图布局时，必须使用 ``$this->include()`` 来引用。

::

    <?= $this->extend('default') ?>

    <?= $this->section('content') ?>
        <h1>Hello World!</h1>

        <?= $this->include('sidebar') ?>
    <?= $this->endSection() ?>

调用 ``include()`` 方法时，可以将渲染普通视图时可以使用的所有选项都传递给它，包括缓存指令等。
